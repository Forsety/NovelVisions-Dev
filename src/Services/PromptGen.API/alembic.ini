[alembic]
script_location = models/database/migrations
prepend_sys_path = .
version_path_separator = os

[post_write_hooks]
hooks = black
black.type = console_scripts
black.entrypoint = black
black.options = -l 88

[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARN
handlers = console
qualname =

[logger_sqlalchemy]
level = WARN
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = INFO
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S

# README.md
# PromptGen API

AI-powered prompt generation and enhancement service for NovelVision platform.

## Features

- üé® **Prompt Enhancement** - Transform simple text into detailed, optimized prompts
- üë• **Character Consistency** - Maintain visual consistency across generations
- üèûÔ∏è **Scene Management** - Track and reuse locations and environments
- üìö **Story Integration** - Generate contextual prompts for story pages
- üé≠ **Multiple AI Models** - Support for Midjourney, DALL-E 3, Stable Diffusion, Flux
- üîÑ **Consistency Engine** - Ensure visual coherence across images
- üíæ **Memory System** - Track story context and elements

## Installation

### Using Docker

```bash
docker-compose up -d
```

### Manual Installation

1. Create virtual environment:
```bash
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
```

2. Install dependencies:
```bash
pip install -r requirements.txt
```

3. Setup database:
```bash
alembic upgrade head
```

4. Run application:
```bash
uvicorn app.main:app --reload
```

## API Documentation

Access the interactive API documentation at:
- Swagger UI: `http://localhost:8000/api/v1/docs`
- ReDoc: `http://localhost:8000/api/v1/redoc`

## Configuration

Copy `.env.example` to `.env` and configure your settings:

```env
OPENAI_API_KEY=your-key
DATABASE_URL=postgresql://user:pass@localhost/promptgen
REDIS_URL=redis://localhost:6379
```

## Usage Examples

### Enhance a Prompt

```python
import httpx

response = httpx.post(
    "http://localhost:8000/api/v1/prompts/enhance",
    json={
        "text": "a warrior in a forest",
        "target_model": "midjourney",
        "style": "fantasy"
    }
)
```

### Create a Character

```python
response = httpx.post(
    "http://localhost:8000/api/v1/characters",
    json={
        "name": "Elena",
        "description": "A brave knight with silver armor",
        "appearance": "Long blonde hair, blue eyes, scar on left cheek"
    }
)
```

## Architecture

- **FastAPI** - Modern async web framework
- **PostgreSQL** - Primary database
- **Redis** - Caching and session storage
- **SQLAlchemy** - Async ORM
- **OpenAI/Anthropic** - AI providers

## License

MIT License
